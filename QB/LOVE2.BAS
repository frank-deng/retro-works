DEFINT A-Z
DECLARE FUNCTION n$ (n%)
DECLARE SUB TX (s AS STRING)

DIM SHARED ASM(100)

DEF SEG=VARSEG(ASM(0))
BLOAD "UTIL.BIN",VARPTR(ASM(0))
ST=0:CALL ABSOLUTE(ST,VARPTR(ASM(0))+ASM(0))
IF ST=0 THEN PRINT "Please run UCDOS and TX first.":END
IF ST=1 THEN PRINT "Please run TX first.":END
IF ST=3 THEN PRINT "256 color support required.":END
DEF SEG

PI#=3.141592654#

OPEN "LPT3" FOR OUTPUT AS #1
FONTSIZE=100:HEARTX=320:HEARTY=10:HEARTW=50:HEARTH=150
TX ("M10CU1,0KB1,0CL0CO7B0,0,640,480RE0,0,LOVE2.PCX${%1=13@"+n$(FONTSIZE)+","+n$(FONTSIZE)+"}")
FOR DY=-1 TO 1: FOR DX=-1 TO 1
    IF DX<>0 OR DY<>0 THEN
        TX ("{(3|"+n$(DY+40)+"-"+n$(DX+1)+"石头-"+n$(DX+638-FONTSIZE*2)+"春婷}")
    END IF
NEXT DX: NEXT DY
TX ("{(11|40-1石头-"+n$(638-FONTSIZE*2)+"春婷}")
X$=n$(HEARTX-HEARTW): Y$=n$(HEARTY+HEARTW): R$=n$(HEARTW)
TX("CO13E"+X$+","+Y$+",0,180,"+R$+","+R$+",2")
TX("CO5E"+X$+","+Y$+",0,180,"+R$+","+R$+",0")
X$=n$(HEARTX+HEARTW)
TX("CO13E"+X$+","+Y$+",0,180,"+R$+","+R$+",2")
TX("CO5E"+X$+","+Y$+",0,180,"+R$+","+R$+",0")
FOR Y0=1 TO HEARTH
   X=INT(HEARTW*2*COS(PI#*Y0/2/HEARTH)+.5)
   X$=n$(HEARTX-X): X2$=n$(HEARTX+X)
   Y$=n$(HEARTY+HEARTW+Y0)
   TX("CO13L"+X$+","+Y$+","+X2$+","+Y$)
   TX("CO5D"+X$+","+Y$+"D"+X2$+","+Y$)
NEXT Y0

WHILE INPUT$(1) = "": WEND
TX ("KB1,1M3CU1,1")
CLOSE
END

FUNCTION n$ (A AS INTEGER)
n$ = LTRIM$(RTRIM$(STR$(A)))
END FUNCTION

SUB TX (s AS STRING)
PRINT #1, CHR$(14); "["; s; "]";
END SUB

